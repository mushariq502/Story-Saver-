<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Instant Story Saver — Facebook Downloader</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  /* THEME */
  --bg1:#0b0f17;
  --bg2:#0f1522;
  --card:#121a2b;
  --muted:#98a2b3;
  --text:#eef2f7;
  --brand:#4cc9f0;
  --brand-2:#4361ee;
  --ok:#22c55e;
  --warn:#f59e0b;
  --err:#ef4444;
  --glass: rgba(255,255,255,.06);
  --border: rgba(255,255,255,.12);
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 16px;
  --radius-sm: 10px;
  --blur: blur(8px);
}

/* RESET */
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:linear-gradient(160deg,var(--bg1),var(--bg2));color:var(--text);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif;}
a{color:inherit;text-decoration:none}
button{font:inherit}
input,select,button{outline:none;border:none}

/* MOBILE VH FIX */
:root{ --vh: 1vh; }
@supports(height:1dvh){
  :root{ --vh: 1dvh; }
}

/* LAYOUT */
.app{
  display:grid;
  grid-template-columns: 300px 1fr;
  min-height: calc(var(--vh) * 100);
}

/* SIDEBAR (Animated) */
.sidebar{
  position:sticky; top:0; height:100dvh;
  border-right:1px solid var(--border);
  background:linear-gradient(180deg, rgba(255,255,255,.04), transparent 120%);
  backdrop-filter: var(--blur);
  padding:20px;
  display:flex; flex-direction:column; gap:18px;
}
.brand{
  display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.5px;
}
.brand-logo{
  width:42px; height:42px; border-radius:12px; display:grid; place-items:center;
  background: radial-gradient(120% 120% at 10% 10%, var(--brand), var(--brand-2));
  box-shadow: inset 0 0 20px rgba(255,255,255,.2), var(--shadow);
}
.badge{
  font-size:12px; padding:2px 8px; border:1px solid var(--border);
  border-radius:999px; color:var(--muted)
}

.nav{
  display:flex; flex-direction:column; gap:8px; margin-top:10px;
}
.nav a{
  display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:12px;
  border:1px solid transparent; transition:.25s ease; color:#d7deea;
}
.nav a:hover{ background:var(--glass); border-color:var(--border); transform: translateY(-1px); }
.nav a.active{ background:linear-gradient(160deg, rgba(76,201,240,.18), rgba(67,97,238,.18)); border-color:rgba(76,201,240,.35); color:#fff; }

.spacer{flex:1}
.small{
  color:var(--muted); font-size:12px; line-height:1.4;
}

/* HEADER (Topbar for mobile) */
.topbar{
  display:none;
  position:sticky; top:0; z-index:30;
  padding:10px 14px; border-bottom:1px solid var(--border);
  background:rgba(10,14,22,.7); backdrop-filter: var(--blur);
  align-items:center; justify-content:space-between; gap:10px;
}
.burger{ width:42px; height:42px; display:grid; place-items:center; border-radius:10px; background:var(--glass); border:1px solid var(--border); }
.burger span{width:18px;height:2px;background:#fff; display:block; position:relative}
.burger span::before,.burger span::after{content:""; position:absolute; left:0; width:18px; height:2px; background:#fff}
.burger span::before{ top:-6px } .burger span::after{ top:6px }

/* CONTENT */
.content{
  padding:34px min(5vw,40px);
}
.page-title{
  display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
  margin-bottom:22px;
}
h1{margin:0;font-size:clamp(22px,2.6vw,32px);letter-spacing:.3px}
.actions{display:flex; gap:10px; flex-wrap:wrap}
.btn{
  padding:10px 14px; border-radius:12px; background:var(--glass); border:1px solid var(--border);
  color:#eaf1ff; cursor:pointer; transition:.25s ease;
}
.btn:hover{ transform: translateY(-1px); }
.btn.primary{ background:linear-gradient(160deg,var(--brand),var(--brand-2)); border:none; box-shadow:0 10px 25px rgba(67,97,238,.28); }
.btn.ghost{ background:transparent }
.btn.ok{ background:linear-gradient(160deg,#16a34a,#22c55e); border:none }
.btn.warn{ background:linear-gradient(160deg,#eab308,#f59e0b); border:none }

/* CARD */
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.04), transparent 120%);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding:20px;
}

/* FORM */
.form{
  display:grid; gap:12px;
}
.input{
  display:flex; gap:8px; align-items:center; background:rgba(255,255,255,.04);
  border:1px solid var(--border); border-radius:14px; padding:10px 12px;
}
.input input{
  background:transparent; color:#fff; border:none; width:100%;
}
.input .chip{
  font-size:12px; padding:6px 10px; border-radius:999px;
  background:rgba(76,201,240,.12); border:1px solid rgba(76,201,240,.35);
}

/* DROPZONE */
.dropzone{
  border:1px dashed rgba(255,255,255,.25);
  border-radius:14px; padding:16px;
  display:flex; align-items:center; justify-content:center; text-align:center; gap:12px; color:var(--muted);
  transition:.3s ease; background:rgba(255,255,255,.03)
}
.dropzone.drag{ border-color: var(--brand); background: rgba(76,201,240,.08); color:#cfefff}

/* PREVIEW */
.preview{
  display:grid; gap:14px; grid-template-columns: 120px 1fr; align-items:center;
}
.thumb{
  width:120px; aspect-ratio:1/1; border-radius:12px; overflow:hidden; background:#0c1220; border:1px solid var(--border);
  display:grid; place-items:center;
}
.thumb .skeleton{
  width:90%; height:90%; border-radius:10px; 
  background:linear-gradient(90deg, #182133, #1f2a44, #182133);
  background-size: 200% 100%;
  animation: shine 1.2s linear infinite;
}
@keyframes shine{ 0%{background-position:0 0} 100%{background-position:200% 0} }

.meta{display:grid; gap:8px}
.meta .title{ font-weight:600 }
.badges{display:flex; gap:8px; flex-wrap:wrap}
.badges .b{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color:#d6def0}

/* PROGRESS */
.progress{
  height:10px; background:#0c1220; border:1px solid var(--border); border-radius:999px; overflow:hidden;
}
.progress .bar{
  width:0%; height:100%;
  background: linear-gradient(90deg, var(--brand), var(--brand-2));
  animation: flow 2.2s linear infinite;
}
@keyframes flow{
  0%{filter:hue-rotate(0deg)} 100%{filter:hue-rotate(360deg)}
}

/* GRID */
.grid{
  display:grid; gap:16px; grid-template-columns: 1.2fr .8fr;
}
@media (max-width: 980px){
  .app{ grid-template-columns: 1fr }
  .sidebar{ position:fixed; inset:0 30% 0 0; transform:translateX(-100%); transition:.35s ease; z-index:50; background:rgba(8,12,20,.98)}
  .sidebar.open{ transform:translateX(0) }
  .topbar{ display:flex }
  .content{ padding:18px 14px 26px }
  .grid{ grid-template-columns: 1fr }
  .preview{ grid-template-columns: 1fr }
}

/* HISTORY */
.history{ display:grid; gap:10px; }
.item{
  display:flex; gap:12px; align-items:center; padding:10px; border-radius:12px;
  border:1px solid var(--border); background:rgba(255,255,255,.03)
}
.item .dot{width:10px; height:10px; border-radius:999px; background:var(--brand)}
.item .i-title{flex:1}
.item .i-actions{display:flex; gap:8px}

/* TOAST */
.toast{
  position:fixed; right:16px; bottom:16px; z-index:60; display:grid; gap:8px; width:min(340px, 92vw);
}
.toast .t{
  display:flex; gap:10px; align-items:flex-start; padding:12px 14px; border-radius:12px; border:1px solid var(--border);
  background: rgba(255,255,255,.06); box-shadow: var(--shadow); font-size:14px;
}
.t.ok{ border-color:rgba(34,197,94,.35) }
.t.err{ border-color:rgba(239,68,68,.35) }
.t .x{ margin-left:auto; cursor:pointer; opacity:.7 }
</style>
</head>
<body>

<!-- MOBILE TOPBAR -->
<div class="topbar">
  <button class="burger" id="burger" aria-label="Open menu"><span></span></button>
  <div class="brand">
    <div class="brand-logo" aria-hidden="true"></div>
    <div>
      <div style="font-weight:700">Instant Story Saver</div>
      <div class="badge">Facebook Downloader</div>
    </div>
  </div>
  <a class="btn ghost" href="index.html">Home</a>
</div>

<div class="app">
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="brand">
      <div class="brand-logo"></div>
      <div>
        <div style="font-weight:700">Instant Story Saver</div>
        <div class="badge">World-Class</div>
      </div>
    </div>

    <nav class="nav">
      <a href="index.html">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5z" stroke="currentColor" stroke-width="1.5"/></svg>
        Home
      </a>
      <a href="subscription.html">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        Subscription
      </a>
      <a class="active" href="facebook.html">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M13 20v-7h3l1-3h-4V7.5c0-.9.4-1.5 1.8-1.5H17V3.2C16.1 3.1 15.2 3 14.3 3 11.9 3 10.2 4.5 10.2 7v3H7v3h3.2v7h2.8z" fill="currentColor"/></svg>
        Facebook Downloader
      </a>
      <a href="instagram.html">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/><circle cx="17.5" cy="6.5" r="1.2" fill="currentColor"/></svg>
        Instagram Downloader
      </a>
      <a href="whatsapp.html">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M20 11.5A8.5 8.5 0 0 1 7.2 19.8L3 21l1.2-4a8.5 8.5 0 1 1 15.8-5.5z" stroke="currentColor" stroke-width="1.5"/><path d="M8.8 9.5c.3 1.9 2.4 4 4.3 4.3l1.1-1.1a.7.7 0 0 1 .8-.1l2 .8c.3.1.5.5.4.9-.5 1.6-2.2 2.7-4 2.4a7.5 7.5 0 0 1-5.6-5.6c-.3-1.7.8-3.5 2.4-4 .4-.1.8.1.9.4l.8 2c.1.3 0 .6-.1.8l-1.1 1.1z" fill="currentColor"/></svg>
        WhatsApp Saver
      </a>
    </nav>

    <div class="spacer"></div>

    <div class="card small">
      <div style="font-weight:600; margin-bottom:6px">Optional Login</div>
      <div>Premium users ke liye ad-free & fast links. Guest users bhi download kar sakte hain.</div>
      <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
        <button class="btn" id="btnLogin">Login with Facebook</button>
        <a class="btn ghost" href="subscription.html">Go Premium</a>
      </div>
    </div>

    <div class="small" style="margin-top:12px">© 2025 Instant Story Saver</div>
  </aside>

  <!-- MAIN -->
  <main class="content">
    <div class="page-title">
      <h1>Facebook Downloader</h1>
      <div class="actions">
        <button class="btn" id="btnHow">How it works</button>
        <a class="btn primary" href="subscription.html">Go Premium</a>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: downloader card -->
      <section class="card">
        <div class="form">
          <label class="input" aria-label="Paste Facebook link">
            <span class="chip">https://</span>
            <input id="url" type="url" placeholder="Facebook video/post URL paste karein…" inputmode="url" autocomplete="off"/>
            <button class="btn" id="paste">Paste</button>
          </label>

          <div class="dropzone" id="dropzone">
            Link yahan drop/paste karein — hum auto-detect kar lenge. (Public posts/videos only)
          </div>

          <div class="badges">
            <span class="b">Preview</span>
            <span class="b">Quality Select</span>
            <span class="b">Fast & Secure</span>
          </div>

          <div class="preview" id="preview" hidden>
            <div class="thumb"><div class="skeleton"></div></div>
            <div class="meta">
              <div class="title" id="pTitle">Loading preview…</div>
              <div class="small" id="pAuthor">—</div>
              <div class="small" id="pDuration">—</div>
              <div class="badges" style="margin-top:4px">
                <select class="btn" id="quality">
                  <option value="sd">SD (Fast)</option>
                  <option value="hd">HD (1080p)</option>
                  <option value="audio">Audio Only</option>
                </select>
                <button class="btn ok" id="download">Download</button>
                <button class="btn" id="copyLink">Copy Link</button>
              </div>
            </div>
          </div>

          <div class="progress" id="progress" hidden>
            <div class="bar" id="bar"></div>
          </div>
        </div>
      </section>

      <!-- RIGHT: history / tips -->
      <aside class="card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px">
          <div style="font-weight:600">Recent Downloads</div>
          <button class="btn ghost" id="clearHistory">Clear</button>
        </div>
        <div class="history" id="history"></div>

        <hr style="border:none; border-top:1px solid var(--border); margin:16px 0">
        <div style="font-weight:600; margin-bottom:6px">Tips</div>
        <ul class="small" style="margin:0 0 6px 18px">
          <li>Public post/video ka link use karein.</li>
          <li>Premium users ko HD + ad-free speed milti hai.</li>
          <li>Mobile me share menu se “Copy link” karein, yahan paste kar dein.</li>
        </ul>
      </aside>
    </div>
  </main>
</div>

<!-- TOASTS -->
<div class="toast" id="toast"></div>

<script>
/* Mobile vh fix */
function setVH(){
  const vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
}
setVH(); addEventListener('resize', setVH);

/* Sidebar toggle (mobile) */
const burger = document.getElementById('burger');
const sidebar = document.getElementById('sidebar');
if(burger){
  burger.addEventListener('click', ()=> sidebar.classList.toggle('open'));
  // close on outside tap
  document.addEventListener('click', (e)=>{
    if(!sidebar.classList.contains('open')) return;
    const within = sidebar.contains(e.target) || burger.contains(e.target);
    if(!within) sidebar.classList.remove('open');
  });
}

/* Mini helpers */
const $ = (q)=>document.querySelector(q);
const toastBox = $('#toast');
function toast(msg, type='ok'){
  const el = document.createElement('div');
  el.className = `t ${type}`;
  el.innerHTML = `<div style="font-weight:600">${type==='err'?'Error':'Success'}</div>
                  <div style="flex:1">${msg}</div>
                  <div class="x" aria-label="Close">✕</div>`;
  toastBox.appendChild(el);
  const remove = ()=> el.remove();
  el.querySelector('.x').onclick = remove;
  setTimeout(remove, 4000);
}

/* Fake preview generator (UI demo without backend) */
function isValidFb(url){
  try{
    const u = new URL(url.trim());
    return /(facebook\.com|fb\.watch)/i.test(u.hostname);
  }catch{ return false }
}
const preview = $('#preview');
const pTitle = $('#pTitle');
const pAuthor = $('#pAuthor');
const pDuration = $('#pDuration');
const thumb = preview?.querySelector('.thumb');

async function buildPreview(url){
  preview.hidden = false;
  thumb.innerHTML = '<div class="skeleton"></div>';
  pTitle.textContent = 'Fetching details…';
  pAuthor.textContent = '—';
  pDuration.textContent = '—';

  // Simulated fetch delay
  await new Promise(r=>setTimeout(r, 800));

  // Mocked data (replace with real API response on backend)
  pTitle.textContent = 'Sample Facebook Video Title';
  pAuthor.textContent = 'by Public Page';
  pDuration.textContent = 'Duration: 02:14';
  thumb.innerHTML = `
    <img alt="Preview thumbnail" src="data:image/svg+xml;utf8,
      <svg xmlns='http://www.w3.org/2000/svg' width='240' height='240'>
        <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
          <stop stop-color='%234361ee' offset='0'/><stop stop-color='%234cc9f0' offset='1'/>
        </linearGradient></defs>
        <rect width='100%' height='100%' rx='16' fill='url(%23g)'/>
        <circle cx='120' cy='120' r='38' fill='white' opacity='.9'/>
        <polygon points='110,100 150,120 110,140' fill='%234361ee'/>
      </svg>" style="width:100%;height:100%;object-fit:cover" />`;
}

/* Progress simulation (replace with real download stream) */
const progress = $('#progress');
const bar = $('#bar');
async function runProgress(){
  progress.hidden = false;
  bar.style.width = '0%';
  for(let i=0;i<=100;i+=4){
    bar.style.width = i+'%';
    await new Promise(r=>setTimeout(r, 60));
  }
}

/* History */
const historyEl = $('#history');
function getHistory(){
  try{ return JSON.parse(localStorage.getItem('fb_history')||'[]'); }catch{ return [] }
}
function setHistory(arr){
  localStorage.setItem('fb_history', JSON.stringify(arr));
}
function renderHistory(){
  const items = getHistory();
  historyEl.innerHTML = '';
  if(!items.length){
    historyEl.innerHTML = `<div class="small" style="opacity:.8">No downloads yet.</div>`;
    return;
  }
  for(const it of items.slice(0,8)){
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="dot"></div>
      <div class="i-title">${it.title}</div>
      <div class="small" style="opacity:.8">${it.quality.toUpperCase()}</div>
      <div class="i-actions">
        <button class="btn" data-url="${it.url}">Open</button>
        <button class="btn ghost copy" data-url="${it.url}">Copy</button>
      </div>`;
    historyEl.appendChild(div);
  }
  historyEl.querySelectorAll('.copy').forEach(btn=>{
    btn.addEventListener('click', async (e)=>{
      const u = e.currentTarget.getAttribute('data-url');
      try{ await navigator.clipboard.writeText(u); toast('Link copied'); }catch{ toast('Copy failed', 'err') }
    });
  });
}
renderHistory();

/* Controls */
const urlInput = $('#url');
$('#paste').addEventListener('click', async ()=>{
  try{
    const text = await navigator.clipboard.readText();
    if(text) urlInput.value = text, urlInput.dispatchEvent(new Event('change'));
  }catch{ toast('Clipboard access blocked', 'err') }
});

const dropzone = $('#dropzone');
;['dragenter','dragover'].forEach(ev=> dropzone.addEventListener(ev, e=>{
  e.preventDefault(); dropzone.classList.add('drag');
}));
;['dragleave','drop'].forEach(ev=> dropzone.addEventListener(ev, e=>{
  e.preventDefault(); dropzone.classList.remove('drag');
}));
dropzone.addEventListener('drop', e=>{
  const text = e.dataTransfer.getData('text') || '';
  if(text) urlInput.value = text, urlInput.dispatchEvent(new Event('change'));
});

urlInput.addEventListener('change', ()=>{
  const url = urlInput.value.trim();
  if(!url){ preview.hidden = true; progress.hidden = true; return }
  if(!isValidFb(url)) return toast('Please paste a valid Facebook link', 'err');
  buildPreview(url);
});

$('#copyLink').addEventListener('click', async ()=>{
  const url = urlInput.value.trim();
  if(!url) return toast('No link to copy', 'err');
  try{ await navigator.clipboard.writeText(url); toast('Link copied'); }catch{ toast('Copy failed', 'err') }
});

$('#download').addEventListener('click', async ()=>{
  const url = urlInput.value.trim();
  if(!isValidFb(url)) return toast('Invalid Facebook link', 'err');
  await runProgress();
  progress.hidden = true;
  const q = $('#quality').value || 'sd';

  // NOTE: Yahan real file serve karne ke liye backend ki zarurat hogi.
  // Abhi demo me hum just success toast + history add kar rahe.
  toast('Download ready (demo)', 'ok');

  const items = getHistory();
  items.unshift({ title: 'Sample Facebook Video Title', url, quality: q, ts: Date.now() });
  setHistory(items.slice(0,20));
  renderHistory();
});

$('#clearHistory').addEventListener('click', ()=>{
  setHistory([]); renderHistory(); toast('History cleared','ok');
});

$('#btnHow').addEventListener('click', ()=>{
  toast('Paste public FB link → Preview → Select Quality → Download', 'ok');
});
$('#btnLogin').addEventListener('click', ()=>{
  toast('Demo login: connect to your auth flow here.', 'ok');
});
</script>
</body>
</html>
